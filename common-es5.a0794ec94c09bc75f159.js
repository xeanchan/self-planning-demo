!function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{IYxB:function(e,n,a){"use strict";a.r(n),a.d(n,"NewPlanningModule",(function(){return f}));var i,r,c=a("ofXK"),o=a("tyNb"),l=a("W9l2"),s=a("fXoL"),u=[{path:"",component:l.a}],g=((i=function e(){t(this,e)}).\u0275mod=s.Nb({type:i}),i.\u0275inj=s.Mb({factory:function(e){return new(e||i)},imports:[[o.c.forChild(u)],o.c]}),i),b=a("QibW"),m=a("jaxi"),d=a("NFeN"),h=a("3Pt+"),p=a("sYmb"),f=((r=function e(){t(this,e)}).\u0275mod=s.Nb({type:r}),r.\u0275inj=s.Mb({factory:function(e){return new(e||r)},imports:[[c.c,h.g,h.q,m.c,d.a,g,o.c,b.c,p.b]]}),r)},W9l2:function(n,a,i){"use strict";i.d(a,"a",(function(){return I}));var r=i("0IaG"),c=i("LVmW"),o=i("3Pt+"),l=i("fXoL"),s=i("tyNb"),u=i("6uu6"),g=i("ofXK"),b=i("QibW"),m=i("sYmb");function d(e,t){1&e&&(l.Ub(0,"div"),l.Gc(1),l.hc(2,"translate"),l.Tb()),2&e&&(l.Cb(1),l.Ic(" ",l.ic(2,1,"field.required")," "))}function h(e,t){if(1&e&&(l.Ub(0,"div",24),l.Ec(1,d,3,3,"div",25),l.Tb()),2&e){var n=l.gc();l.Cb(1),l.lc("ngIf",n.taskName.errors.required)}}function p(e,t){if(1&e&&(l.Ub(0,"span",26),l.Gc(1),l.Tb()),2&e){var n=l.gc();l.Cb(1),l.Hc(n.calculateForm.mapName)}}function f(e,t){1&e&&(l.Ub(0,"span",26),l.Gc(1),l.hc(2,"translate"),l.Tb()),2&e&&(l.Cb(1),l.Hc(l.ic(2,1,"nofile")))}function C(e,t){1&e&&(l.Ub(0,"div",24),l.Gc(1),l.hc(2,"translate"),l.Tb()),2&e&&(l.Cb(1),l.Ic(" ",l.ic(2,1,"image.required")," "))}function v(e,t){1&e&&(l.Ub(0,"div"),l.Gc(1),l.hc(2,"translate"),l.Tb()),2&e&&(l.Cb(1),l.Ic(" ",l.ic(2,1,"numeric.enter")," "))}function w(e,t){1&e&&(l.Gc(0),l.hc(1,"translate")),2&e&&l.Ic(" ",l.ic(1,1,"field.required")," ")}function M(e,t){if(1&e&&(l.Ub(0,"div",24),l.Ec(1,v,3,3,"div",27),l.Ec(2,w,2,3,"ng-template",null,28,l.Fc),l.Tb()),2&e){var n=l.tc(3),a=l.gc();l.Cb(1),l.lc("ngIf",(null==a.width.errors?null:a.width.errors.pattern)||(null==a.height.errors?null:a.height.errors.pattern)||(null==a.altitude.errors?null:a.altitude.errors.pattern))("ngIfElse",n)}}var I=function(){var n=function(){function n(e,a,i,r){t(this,n),this.router=e,this.authService=a,this.matDialog=i,this.data=r,this.calculateForm=new c.a,this.showImgMsg=!1,sessionStorage.removeItem("calculateForm"),sessionStorage.removeItem("importFile"),sessionStorage.removeItem("taskName"),this.timeInterval=r.timeInterval}var a,i,r;return a=n,(i=[{key:"taskName",get:function(){return this.formGroup.get("taskName")}},{key:"width",get:function(){return this.sizeGroup.get("width")}},{key:"height",get:function(){return this.sizeGroup.get("height")}},{key:"altitude",get:function(){return this.sizeGroup.get("altitude")}},{key:"ngOnInit",value:function(){this.calculateForm.sessionid=this.authService.userToken,this.formGroup=new o.e({taskName:new o.c(this.calculateForm.taskName,[o.t.required])}),this.sizeGroup=new o.e({width:new o.c,height:new o.c,altitude:new o.c},{validators:function(e){var t=e.get("width"),n=e.get("height"),a=e.get("altitude");return t.valid&&n.valid&&a.valid?null:{sizeRevealed:!0}}})}},{key:"fileChange",value:function(e){var t=this,n=e.target.files[0],a=new FileReader;a.readAsDataURL(n),a.onload=function(){t.calculateForm.mapImage=a.result.toString()},this.calculateForm.mapName=n.name,this.showImgMsg=!1}},{key:"ok",value:function(){for(var e=document.querySelector(".modalContent").querySelectorAll('input[type="text"]'),t=0;t<e.length;t++)e[t].focus(),e[t].blur();null!=this.calculateForm.mapName?this.formGroup.invalid||this.sizeGroup.invalid||(window.clearInterval(this.timeInterval),sessionStorage.setItem("calculateForm",JSON.stringify(this.calculateForm)),this.matDialog.closeAll(),this.router.navigate(["/site/site-planning"]),Object.keys(sessionStorage).forEach((function(e){-1!==e.indexOf("form_")&&sessionStorage.removeItem(e)}))):this.showImgMsg=!0}},{key:"import",value:function(e){var t=this,n=e.target.files[0],a=new FileReader;a.readAsDataURL(n),a.onload=function(){sessionStorage.setItem("importFile",a.result.toString());var e=n.name.substring(0,n.name.lastIndexOf("."));sessionStorage.setItem("taskName",e),window.clearInterval(t.timeInterval),t.matDialog.closeAll(),Object.keys(sessionStorage).forEach((function(e){-1!==e.indexOf("form_")&&sessionStorage.removeItem(e)})),t.router.navigate(["/site/site-planning"])}}}])&&e(a.prototype,i),r&&e(a,r),n}();return n.\u0275fac=function(e){return new(e||n)(l.Pb(s.b),l.Pb(u.a),l.Pb(r.b),l.Pb(r.a))},n.\u0275cmp=l.Jb({type:n,selectors:[["app-new-planning"]],decls:72,vars:57,consts:[[1,"example-button-row"],["mat-button","",3,"click"],["type","file","id","file0","accept",".xlsx",2,"display","none",3,"change"],["importFile",""],[1,"modalContent"],[1,"th"],[3,"formGroup"],["type","text","formControlName","taskName","required","",1,"w100",3,"ngModel","ngModelChange"],["class","alert alert-danger",4,"ngIf"],["mat-button","",2,"cursor","pointer",3,"click"],["type","file","accept","image/jpeg,image/png,image/jpg",2,"display","none",3,"change"],["mapFile",""],["class","ml-2",4,"ngIf"],[1,"note","ml-2"],[1,"size",3,"formGroup"],["type","text","formControlName","width","required","","pattern","^-?[\\d.]+(?:e-?\\d+)?$",3,"placeholder","ngModel","ngModelChange"],["type","text","formControlName","height","required","","pattern","^-?[\\d.]+(?:e-?\\d+)?$",3,"placeholder","ngModel","ngModelChange"],["type","text","formControlName","altitude","required","","pattern","^-?[\\d.]+(?:e-?\\d+)?$",3,"placeholder","ngModel","ngModelChange"],["aria-label","Select an option",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"modalFooter"],["href","javascript:void(0)",3,"click"],[1,"alert","alert-danger"],[4,"ngIf"],[1,"ml-2"],[4,"ngIf","ngIfElse"],["required",""]],template:function(e,t){if(1&e){var n=l.Vb();l.Ub(0,"h3"),l.Gc(1),l.hc(2,"translate"),l.Ub(3,"span",0),l.Ub(4,"button",1),l.cc("click",(function(){return l.xc(n),l.tc(8).click()})),l.Gc(5),l.hc(6,"translate"),l.Tb(),l.Ub(7,"input",2,3),l.cc("change",(function(e){return t.import(e)})),l.Tb(),l.Tb(),l.Tb(),l.Ub(9,"div",4),l.Ub(10,"table"),l.Ub(11,"tbody"),l.Ub(12,"tr"),l.Ub(13,"td",5),l.Gc(14),l.hc(15,"translate"),l.Tb(),l.Ub(16,"td",6),l.Ub(17,"input",7),l.cc("ngModelChange",(function(e){return t.calculateForm.taskName=e})),l.Tb(),l.Ec(18,h,2,1,"div",8),l.Tb(),l.Tb(),l.Ub(19,"tr"),l.Ub(20,"td",5),l.Gc(21),l.hc(22,"translate"),l.Tb(),l.Ub(23,"td"),l.Ub(24,"button",9),l.cc("click",(function(){return l.xc(n),l.tc(28).click()})),l.Gc(25),l.hc(26,"translate"),l.Tb(),l.Ub(27,"input",10,11),l.cc("change",(function(e){return t.fileChange(e)})),l.Tb(),l.Ec(29,p,2,1,"span",12),l.Ec(30,f,3,3,"span",12),l.Ub(31,"span",13),l.Gc(32),l.hc(33,"translate"),l.Tb(),l.Ec(34,C,3,3,"div",8),l.Tb(),l.Tb(),l.Ub(35,"tr"),l.Ub(36,"td",5),l.Gc(37),l.hc(38,"translate"),l.Tb(),l.Ub(39,"td",14),l.Ub(40,"span"),l.Ub(41,"input",15),l.cc("ngModelChange",(function(e){return t.calculateForm.width=e})),l.hc(42,"translate"),l.Tb(),l.Gc(43),l.hc(44,"translate"),l.Tb(),l.Ub(45,"span"),l.Ub(46,"input",16),l.cc("ngModelChange",(function(e){return t.calculateForm.height=e})),l.hc(47,"translate"),l.Tb(),l.Gc(48),l.hc(49,"translate"),l.Tb(),l.Ub(50,"span"),l.Ub(51,"input",17),l.cc("ngModelChange",(function(e){return t.calculateForm.altitude=e})),l.hc(52,"translate"),l.Tb(),l.Gc(53),l.hc(54,"translate"),l.Tb(),l.Ec(55,M,4,2,"div",8),l.Tb(),l.Tb(),l.Ub(56,"tr"),l.Ub(57,"td",5),l.Gc(58),l.hc(59,"translate"),l.Tb(),l.Ub(60,"td"),l.Ub(61,"mat-radio-group",18),l.cc("ngModelChange",(function(e){return t.calculateForm.objectiveIndex=e})),l.Ub(62,"mat-radio-button",19),l.Gc(63,"4G"),l.Tb(),l.Ub(64,"mat-radio-button",20),l.Gc(65,"5G"),l.Tb(),l.Ub(66,"mat-radio-button",21),l.Gc(67,"Wifi"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(68,"div",22),l.Ub(69,"a",23),l.cc("click",(function(){return t.ok()})),l.Gc(70),l.hc(71,"translate"),l.Tb(),l.Tb(),l.Tb()}2&e&&(l.Cb(1),l.Ic("",l.ic(2,27,"planning.new")," "),l.Cb(4),l.Ic("",l.ic(6,29,"planning.import"),"(.xlsx)"),l.Cb(9),l.Hc(l.ic(15,31,"planning.name")),l.Cb(2),l.lc("formGroup",t.formGroup),l.Cb(1),l.lc("ngModel",t.calculateForm.taskName),l.Cb(1),l.lc("ngIf",t.taskName.invalid&&(t.taskName.dirty||t.taskName.touched)),l.Cb(3),l.Hc(l.ic(22,33,"planning.image")),l.Cb(4),l.Hc(l.ic(26,35,"file")),l.Cb(4),l.lc("ngIf",""!=t.calculateForm.mapName),l.Cb(1),l.lc("ngIf",""==t.calculateForm.mapName),l.Cb(2),l.Ic("",l.ic(33,37,"planning.limit"),"..."),l.Cb(2),l.lc("ngIf",t.showImgMsg),l.Cb(3),l.Hc(l.ic(38,39,"planning.size")),l.Cb(2),l.lc("formGroup",t.sizeGroup),l.Cb(2),l.mc("placeholder",l.ic(42,41,"width")),l.lc("ngModel",t.calculateForm.width),l.Cb(2),l.Hc(l.ic(44,43,"meter")),l.Cb(3),l.mc("placeholder",l.ic(47,45,"height")),l.lc("ngModel",t.calculateForm.height),l.Cb(2),l.Hc(l.ic(49,47,"meter")),l.Cb(3),l.mc("placeholder",l.ic(52,49,"result.pdf.altitude")),l.lc("ngModel",t.calculateForm.altitude),l.Cb(2),l.Hc(l.ic(54,51,"meter")),l.Cb(2),l.lc("ngIf",(null==t.sizeGroup.errors?null:t.sizeGroup.errors.sizeRevealed)&&(t.sizeGroup.touched||t.sizeGroup.dirty)),l.Cb(3),l.Hc(l.ic(59,53,"planning.net")),l.Cb(3),l.lc("ngModel",t.calculateForm.objectiveIndex),l.Cb(9),l.Hc(l.ic(71,55,"planning.ok")))},directives:[o.l,o.f,o.b,o.k,o.d,o.r,g.l,o.p,b.b,o.n,b.a],pipes:[m.c],styles:[".modalContent[_ngcontent-%COMP%]{color:#333}td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{margin:.3em .5em;width:4em}td.th[_ngcontent-%COMP%]{background-color:#eee;text-align:right}.modalContent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{width:12em}mat-button-toggle-group[_ngcontent-%COMP%]{margin-left:.5em}.mat-radio-button[_ngcontent-%COMP%]{margin-right:1em}[_nghost-%COMP%]     .mat-button-toggle-appearance-standard .mat-button-toggle-label-content{line-height:32px;padding:0 12px}.h3[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-size:1.3rem}h3[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.7em;margin-left:.5em;font-weight:400;border:0;background-color:#ddd;outline:0;cursor:pointer;border-radius:4px;padding:.3em 1em .4em;line-height:1;vertical-align:bottom}.size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-right:1em}.size[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:3em;margin:0 .3em}.note[_ngcontent-%COMP%]{font-size:.85em;color:#999}"]}),n}()}}])}();