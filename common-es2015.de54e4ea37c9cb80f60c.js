(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{IYxB:function(t,e,n){"use strict";n.r(e),n.d(e,"NewPlanningModule",(function(){return h}));var c=n("ofXK"),a=n("tyNb"),o=n("W9l2"),r=n("fXoL");const i=[{path:"",component:o.a}];class l{}l.\u0275mod=r.ec({type:l}),l.\u0275inj=r.dc({factory:function(t){return new(t||l)},imports:[[a.d.forChild(i)],a.d]});var s=n("QibW"),g=n("jaxi"),u=n("NFeN"),d=n("3Pt+"),m=n("sYmb");class h{}h.\u0275mod=r.ec({type:h}),h.\u0275inj=r.dc({factory:function(t){return new(t||h)},imports:[[c.c,d.g,d.q,g.c,u.a,l,a.d,s.c,m.b]]})},W9l2:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var c=n("0IaG"),a=n("LVmW"),o=n("3Pt+"),r=n("fXoL"),i=n("tyNb"),l=n("6uu6"),s=n("tk/3");class g{constructor(){}}g.\u0275fac=function(t){return new(t||g)},g.\u0275prov=r.cc({token:g,factory:g.\u0275fac,providedIn:"root"});var u=n("ofXK"),d=n("QibW"),m=n("sYmb");function h(t,e){1&t&&(r.lc(0,"div"),r.Xc(1),r.yc(2,"translate"),r.kc()),2&t&&(r.Tb(1),r.Zc(" ",r.zc(2,1,"field.required")," "))}function p(t,e){if(1&t&&(r.lc(0,"div",21),r.Vc(1,h,3,3,"div",22),r.kc()),2&t){const t=r.xc();r.Tb(1),r.Cc("ngIf",t.taskName.errors.required)}}function f(t,e){1&t&&(r.lc(0,"div",21),r.Xc(1),r.yc(2,"translate"),r.kc()),2&t&&(r.Tb(1),r.Zc(" ",r.zc(2,1,"image.required")," "))}function k(t,e){1&t&&(r.lc(0,"div"),r.Xc(1),r.yc(2,"translate"),r.kc()),2&t&&(r.Tb(1),r.Zc(" ",r.zc(2,1,"numeric.enter")," "))}function b(t,e){1&t&&(r.Xc(0),r.yc(1,"translate")),2&t&&r.Zc(" ",r.zc(1,1,"field.required")," ")}function v(t,e){if(1&t&&(r.lc(0,"div",21),r.Vc(1,k,3,3,"div",23),r.Vc(2,b,2,3,"ng-template",null,24,r.Wc),r.kc()),2&t){const t=r.Kc(3),e=r.xc();r.Tb(1),r.Cc("ngIf",(null==e.width.errors?null:e.width.errors.pattern)||(null==e.height.errors?null:e.height.errors.pattern)||(null==e.altitude.errors?null:e.altitude.errors.pattern))("ngIfElse",t)}}class C{constructor(t,e,n,c,o,r){this.router=t,this.authService=e,this.matDialog=n,this.http=c,this.taskFormService=o,this.data=r,this.calculateForm=new a.a,this.showImgMsg=!1,sessionStorage.removeItem("calculateForm"),sessionStorage.removeItem("importFile"),sessionStorage.removeItem("taskName"),this.timeInterval=r.timeInterval}get taskName(){return this.formGroup.get("taskName")}get width(){return this.sizeGroup.get("width")}get height(){return this.sizeGroup.get("height")}get altitude(){return this.sizeGroup.get("altitude")}ngOnInit(){this.calculateForm.sessionid=this.authService.userToken,this.formGroup=new o.e({taskName:new o.c(this.calculateForm.taskName,[o.t.required])});this.sizeGroup=new o.e({width:new o.c,height:new o.c,altitude:new o.c},{validators:t=>{const e=t.get("width"),n=t.get("height"),c=t.get("altitude");return e.valid&&n.valid&&c.valid?null:{sizeRevealed:!0}}})}fileChange(t){const e=t.target.files[0],n=new FileReader;n.readAsDataURL(e),n.onload=()=>{this.calculateForm.mapImage=n.result.toString()},this.calculateForm.mapName=e.name,this.showImgMsg=!1}ok(){const t=document.querySelector(".modalContent").querySelectorAll('input[type="text"]');for(let e=0;e<t.length;e++)t[e].focus(),t[e].blur();null!=this.calculateForm.mapName?this.formGroup.invalid||this.sizeGroup.invalid||(window.clearInterval(this.timeInterval),sessionStorage.setItem("calculateForm",JSON.stringify(this.calculateForm)),this.taskFormService.calculateForm=this.calculateForm,this.matDialog.closeAll(),this.router.navigate(["/site/site-planning"]),Object.keys(sessionStorage).forEach(t=>{-1!==t.indexOf("form_")&&sessionStorage.removeItem(t)})):this.showImgMsg=!0}import(t){const e=t.target.files[0],n=new FileReader;n.readAsDataURL(e),n.onload=()=>{sessionStorage.setItem("importFile",n.result.toString());const t=e.name.substring(0,e.name.lastIndexOf("."));sessionStorage.setItem("taskName",t),window.clearInterval(this.timeInterval),this.matDialog.closeAll(),this.router.navigate(["/site/site-planning"])}}}C.\u0275fac=function(t){return new(t||C)(r.gc(i.b),r.gc(l.a),r.gc(c.b),r.gc(s.b),r.gc(g),r.gc(c.a))},C.\u0275cmp=r.ac({type:C,selectors:[["app-new-planning"]],decls:60,vars:34,consts:[[1,"example-button-row"],["mat-button","",3,"click"],["type","file","accept",".xlsx",2,"display","none",3,"change"],["importFile",""],[1,"modalContent"],[1,"th"],[3,"formGroup"],["type","text","formControlName","taskName","required","",1,"w100",3,"ngModel","ngModelChange"],["class","alert alert-danger",4,"ngIf"],["type","file","accept","image/jpeg,image/png,image/jpg",3,"change"],[1,"note"],[1,"size",3,"formGroup"],["type","text","placeholder","\u9577","formControlName","width","required","","pattern","^-?[\\d.]+(?:e-?\\d+)?$",3,"ngModel","ngModelChange"],["type","text","placeholder","\u5bec","formControlName","height","required","","pattern","^-?[\\d.]+(?:e-?\\d+)?$",3,"ngModel","ngModelChange"],["type","text","placeholder","\u9ad8","formControlName","altitude","required","","pattern","^-?[\\d.]+(?:e-?\\d+)?$",3,"ngModel","ngModelChange"],["aria-label","Select an option",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"modalFooter"],["href","javascript:void(0)",3,"click"],[1,"alert","alert-danger"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["required",""]],template:function(t,e){if(1&t){const t=r.mc();r.lc(0,"h3"),r.Xc(1),r.yc(2,"translate"),r.lc(3,"span",0),r.lc(4,"button",1),r.tc("click",(function(){r.Oc(t);return r.Kc(8).click()})),r.Xc(5),r.yc(6,"translate"),r.kc(),r.lc(7,"input",2,3),r.tc("change",(function(t){return e.import(t)})),r.kc(),r.kc(),r.kc(),r.lc(9,"div",4),r.lc(10,"table"),r.lc(11,"tbody"),r.lc(12,"tr"),r.lc(13,"td",5),r.Xc(14),r.yc(15,"translate"),r.kc(),r.lc(16,"td",6),r.lc(17,"input",7),r.tc("ngModelChange",(function(t){return e.calculateForm.taskName=t})),r.kc(),r.Vc(18,p,2,1,"div",8),r.kc(),r.kc(),r.lc(19,"tr"),r.lc(20,"td",5),r.Xc(21),r.yc(22,"translate"),r.kc(),r.lc(23,"td"),r.lc(24,"input",9),r.tc("change",(function(t){return e.fileChange(t)})),r.kc(),r.lc(25,"span",10),r.Xc(26),r.yc(27,"translate"),r.kc(),r.Vc(28,f,3,3,"div",8),r.kc(),r.kc(),r.lc(29,"tr"),r.lc(30,"td",5),r.Xc(31),r.yc(32,"translate"),r.kc(),r.lc(33,"td",11),r.lc(34,"span"),r.lc(35,"input",12),r.tc("ngModelChange",(function(t){return e.calculateForm.width=t})),r.kc(),r.Xc(36,"\u516c\u5c3a"),r.kc(),r.lc(37,"span"),r.lc(38,"input",13),r.tc("ngModelChange",(function(t){return e.calculateForm.height=t})),r.kc(),r.Xc(39,"\u516c\u5c3a"),r.kc(),r.lc(40,"span"),r.lc(41,"input",14),r.tc("ngModelChange",(function(t){return e.calculateForm.altitude=t})),r.kc(),r.Xc(42,"\u516c\u5c3a"),r.kc(),r.Vc(43,v,4,2,"div",8),r.kc(),r.kc(),r.lc(44,"tr"),r.lc(45,"td",5),r.Xc(46),r.yc(47,"translate"),r.kc(),r.lc(48,"td"),r.lc(49,"mat-radio-group",15),r.tc("ngModelChange",(function(t){return e.calculateForm.objectiveIndex=t})),r.lc(50,"mat-radio-button",16),r.Xc(51,"4G"),r.kc(),r.lc(52,"mat-radio-button",17),r.Xc(53,"5G"),r.kc(),r.lc(54,"mat-radio-button",18),r.Xc(55,"Wifi"),r.kc(),r.kc(),r.kc(),r.kc(),r.kc(),r.kc(),r.lc(56,"div",19),r.lc(57,"a",20),r.tc("click",(function(){return e.ok()})),r.Xc(58),r.yc(59,"translate"),r.kc(),r.kc(),r.kc()}2&t&&(r.Tb(1),r.Zc("",r.zc(2,18,"planning.new")," "),r.Tb(4),r.Zc("",r.zc(6,20,"planning.import"),"(.xlsx)"),r.Tb(9),r.Yc(r.zc(15,22,"planning.name")),r.Tb(2),r.Cc("formGroup",e.formGroup),r.Tb(1),r.Cc("ngModel",e.calculateForm.taskName),r.Tb(1),r.Cc("ngIf",e.taskName.invalid&&(e.taskName.dirty||e.taskName.touched)),r.Tb(3),r.Yc(r.zc(22,24,"planning.image")),r.Tb(5),r.Zc("",r.zc(27,26,"planning.limit"),"..."),r.Tb(2),r.Cc("ngIf",e.showImgMsg),r.Tb(3),r.Yc(r.zc(32,28,"planning.size")),r.Tb(2),r.Cc("formGroup",e.sizeGroup),r.Tb(2),r.Cc("ngModel",e.calculateForm.width),r.Tb(3),r.Cc("ngModel",e.calculateForm.height),r.Tb(3),r.Cc("ngModel",e.calculateForm.altitude),r.Tb(2),r.Cc("ngIf",(null==e.sizeGroup.errors?null:e.sizeGroup.errors.sizeRevealed)&&(e.sizeGroup.touched||e.sizeGroup.dirty)),r.Tb(3),r.Yc(r.zc(47,30,"planning.net")),r.Tb(3),r.Cc("ngModel",e.calculateForm.objectiveIndex),r.Tb(9),r.Yc(r.zc(59,32,"planning.ok")))},directives:[o.l,o.f,o.b,o.k,o.d,o.r,u.l,o.p,d.b,o.n,d.a],pipes:[m.c],styles:[".modalContent[_ngcontent-%COMP%]{color:#333}td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{margin:.3em .5em;width:4em}td.th[_ngcontent-%COMP%]{background-color:#eee;text-align:right}.modalContent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{width:12em}mat-button-toggle-group[_ngcontent-%COMP%]{margin-left:.5em}.mat-radio-button[_ngcontent-%COMP%]{margin-right:1em}[_nghost-%COMP%]     .mat-button-toggle-appearance-standard .mat-button-toggle-label-content{line-height:32px;padding:0 12px}.h3[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-size:1.3rem}h3[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.7em;margin-left:.5em;font-weight:400;border:0;background-color:#ddd;outline:0;cursor:pointer;border-radius:4px;padding:.3em 1em .4em;line-height:1;vertical-align:bottom}.size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-right:1em}.size[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:3em;margin:0 .3em}.note[_ngcontent-%COMP%]{font-size:.85em;color:#999}"]})}}]);