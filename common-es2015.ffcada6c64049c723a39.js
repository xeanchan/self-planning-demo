(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{IYxB:function(t,e,n){"use strict";n.r(e),n.d(e,"NewPlanningModule",(function(){return d}));var a=n("ofXK"),c=n("tyNb"),i=n("W9l2"),r=n("fXoL");const o=[{path:"",component:i.a}];let l=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(e){return new(e||t)},imports:[[c.c.forChild(o)],c.c]}),t})();var s=n("QibW"),u=n("jaxi"),g=n("NFeN"),b=n("3Pt+"),m=n("sYmb");let d=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(e){return new(e||t)},imports:[[a.c,b.g,b.q,u.c,g.a,l,c.c,s.c,m.b]]}),t})()},W9l2:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var a=n("0IaG"),c=n("LVmW"),i=n("3Pt+"),r=n("fXoL"),o=n("tyNb"),l=n("6uu6"),s=n("ofXK"),u=n("QibW"),g=n("sYmb");function b(t,e){1&t&&(r.Ub(0,"div"),r.Fc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Hc(" ",r.ic(2,1,"field.required")," "))}function m(t,e){if(1&t&&(r.Ub(0,"div",24),r.Dc(1,b,3,3,"div",25),r.Tb()),2&t){const t=r.gc();r.Cb(1),r.lc("ngIf",t.taskName.errors.required)}}function d(t,e){if(1&t&&(r.Ub(0,"span",26),r.Fc(1),r.Tb()),2&t){const t=r.gc();r.Cb(1),r.Gc(t.calculateForm.mapName)}}function h(t,e){1&t&&(r.Ub(0,"span",26),r.Fc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Gc(r.ic(2,1,"nofile")))}function p(t,e){1&t&&(r.Ub(0,"div",24),r.Fc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Hc(" ",r.ic(2,1,"image.required")," "))}function f(t,e){1&t&&(r.Ub(0,"div"),r.Fc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Hc(" ",r.ic(2,1,"numeric.enter")," "))}function C(t,e){1&t&&(r.Fc(0),r.hc(1,"translate")),2&t&&r.Hc(" ",r.ic(1,1,"field.required")," ")}function F(t,e){if(1&t&&(r.Ub(0,"div",24),r.Dc(1,f,3,3,"div",27),r.Dc(2,C,2,3,"ng-template",null,28,r.Ec),r.Tb()),2&t){const t=r.sc(3),e=r.gc();r.Cb(1),r.lc("ngIf",(null==e.width.errors?null:e.width.errors.pattern)||(null==e.height.errors?null:e.height.errors.pattern)||(null==e.altitude.errors?null:e.altitude.errors.pattern))("ngIfElse",t)}}let v=(()=>{class t{constructor(t,e,n,a){this.router=t,this.authService=e,this.matDialog=n,this.data=a,this.calculateForm=new c.a,this.showImgMsg=!1,sessionStorage.removeItem("calculateForm"),sessionStorage.removeItem("importFile"),sessionStorage.removeItem("taskName"),this.timeInterval=a.timeInterval}get taskName(){return this.formGroup.get("taskName")}get width(){return this.sizeGroup.get("width")}get height(){return this.sizeGroup.get("height")}get altitude(){return this.sizeGroup.get("altitude")}ngOnInit(){this.calculateForm.sessionid=this.authService.userToken,this.formGroup=new i.e({taskName:new i.c(this.calculateForm.taskName,[i.t.required])}),this.sizeGroup=new i.e({width:new i.c,height:new i.c,altitude:new i.c},{validators:t=>{const e=t.get("width"),n=t.get("height"),a=t.get("altitude");return e.valid&&n.valid&&a.valid?null:{sizeRevealed:!0}}})}fileChange(t){const e=t.target.files[0],n=new FileReader;n.readAsDataURL(e),n.onload=()=>{this.calculateForm.mapImage=n.result.toString()},this.calculateForm.mapName=e.name,this.showImgMsg=!1}ok(){const t=document.querySelector(".modalContent").querySelectorAll('input[type="text"]');for(let e=0;e<t.length;e++)t[e].focus(),t[e].blur();null!=this.calculateForm.mapName?this.formGroup.invalid||this.sizeGroup.invalid||(window.clearInterval(this.timeInterval),sessionStorage.setItem("calculateForm",JSON.stringify(this.calculateForm)),this.matDialog.closeAll(),this.router.navigate(["/site/site-planning"]),Object.keys(sessionStorage).forEach(t=>{-1!==t.indexOf("form_")&&sessionStorage.removeItem(t)})):this.showImgMsg=!0}import(t){const e=t.target.files[0],n=new FileReader;n.readAsDataURL(e),n.onload=()=>{sessionStorage.setItem("importFile",n.result.toString());const t=e.name.substring(0,e.name.lastIndexOf("."));sessionStorage.setItem("taskName",t),window.clearInterval(this.timeInterval),this.matDialog.closeAll(),Object.keys(sessionStorage).forEach(t=>{-1!==t.indexOf("form_")&&sessionStorage.removeItem(t)}),this.router.navigate(["/site/site-planning"])}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(o.b),r.Pb(l.a),r.Pb(a.b),r.Pb(a.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-new-planning"]],decls:72,vars:57,consts:[[1,"example-button-row"],["mat-button","",3,"click"],["type","file","id","file0","accept",".xlsx",2,"display","none",3,"change"],["importFile",""],[1,"modalContent"],[1,"th"],[3,"formGroup"],["type","text","formControlName","taskName","required","",1,"w100",3,"ngModel","ngModelChange"],["class","alert alert-danger",4,"ngIf"],["mat-button","",2,"cursor","pointer",3,"click"],["type","file","accept","image/jpeg,image/png,image/jpg",2,"display","none",3,"change"],["mapFile",""],["class","ml-2",4,"ngIf"],[1,"note","ml-2"],[1,"size",3,"formGroup"],["type","text","formControlName","width","required","","pattern","^-?[\\d.]+(?:e-?\\d+)?$",3,"placeholder","ngModel","ngModelChange"],["type","text","formControlName","height","required","","pattern","^-?[\\d.]+(?:e-?\\d+)?$",3,"placeholder","ngModel","ngModelChange"],["type","text","formControlName","altitude","required","","pattern","^-?[\\d.]+(?:e-?\\d+)?$",3,"placeholder","ngModel","ngModelChange"],["aria-label","Select an option",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"modalFooter"],["href","javascript:void(0)",3,"click"],[1,"alert","alert-danger"],[4,"ngIf"],[1,"ml-2"],[4,"ngIf","ngIfElse"],["required",""]],template:function(t,e){if(1&t){const t=r.Vb();r.Ub(0,"h3"),r.Fc(1),r.hc(2,"translate"),r.Ub(3,"span",0),r.Ub(4,"button",1),r.cc("click",(function(){return r.wc(t),r.sc(8).click()})),r.Fc(5),r.hc(6,"translate"),r.Tb(),r.Ub(7,"input",2,3),r.cc("change",(function(t){return e.import(t)})),r.Tb(),r.Tb(),r.Tb(),r.Ub(9,"div",4),r.Ub(10,"table"),r.Ub(11,"tbody"),r.Ub(12,"tr"),r.Ub(13,"td",5),r.Fc(14),r.hc(15,"translate"),r.Tb(),r.Ub(16,"td",6),r.Ub(17,"input",7),r.cc("ngModelChange",(function(t){return e.calculateForm.taskName=t})),r.Tb(),r.Dc(18,m,2,1,"div",8),r.Tb(),r.Tb(),r.Ub(19,"tr"),r.Ub(20,"td",5),r.Fc(21),r.hc(22,"translate"),r.Tb(),r.Ub(23,"td"),r.Ub(24,"button",9),r.cc("click",(function(){return r.wc(t),r.sc(28).click()})),r.Fc(25),r.hc(26,"translate"),r.Tb(),r.Ub(27,"input",10,11),r.cc("change",(function(t){return e.fileChange(t)})),r.Tb(),r.Dc(29,d,2,1,"span",12),r.Dc(30,h,3,3,"span",12),r.Ub(31,"span",13),r.Fc(32),r.hc(33,"translate"),r.Tb(),r.Dc(34,p,3,3,"div",8),r.Tb(),r.Tb(),r.Ub(35,"tr"),r.Ub(36,"td",5),r.Fc(37),r.hc(38,"translate"),r.Tb(),r.Ub(39,"td",14),r.Ub(40,"span"),r.Ub(41,"input",15),r.cc("ngModelChange",(function(t){return e.calculateForm.width=t})),r.hc(42,"translate"),r.Tb(),r.Fc(43),r.hc(44,"translate"),r.Tb(),r.Ub(45,"span"),r.Ub(46,"input",16),r.cc("ngModelChange",(function(t){return e.calculateForm.height=t})),r.hc(47,"translate"),r.Tb(),r.Fc(48),r.hc(49,"translate"),r.Tb(),r.Ub(50,"span"),r.Ub(51,"input",17),r.cc("ngModelChange",(function(t){return e.calculateForm.altitude=t})),r.hc(52,"translate"),r.Tb(),r.Fc(53),r.hc(54,"translate"),r.Tb(),r.Dc(55,F,4,2,"div",8),r.Tb(),r.Tb(),r.Ub(56,"tr"),r.Ub(57,"td",5),r.Fc(58),r.hc(59,"translate"),r.Tb(),r.Ub(60,"td"),r.Ub(61,"mat-radio-group",18),r.cc("ngModelChange",(function(t){return e.calculateForm.objectiveIndex=t})),r.Ub(62,"mat-radio-button",19),r.Fc(63,"4G"),r.Tb(),r.Ub(64,"mat-radio-button",20),r.Fc(65,"5G"),r.Tb(),r.Ub(66,"mat-radio-button",21),r.Fc(67,"Wifi"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(68,"div",22),r.Ub(69,"a",23),r.cc("click",(function(){return e.ok()})),r.Fc(70),r.hc(71,"translate"),r.Tb(),r.Tb(),r.Tb()}2&t&&(r.Cb(1),r.Hc("",r.ic(2,27,"planning.new")," "),r.Cb(4),r.Hc("",r.ic(6,29,"planning.import"),"(.xlsx)"),r.Cb(9),r.Gc(r.ic(15,31,"planning.name")),r.Cb(2),r.lc("formGroup",e.formGroup),r.Cb(1),r.lc("ngModel",e.calculateForm.taskName),r.Cb(1),r.lc("ngIf",e.taskName.invalid&&(e.taskName.dirty||e.taskName.touched)),r.Cb(3),r.Gc(r.ic(22,33,"planning.image")),r.Cb(4),r.Gc(r.ic(26,35,"file")),r.Cb(4),r.lc("ngIf",""!=e.calculateForm.mapName),r.Cb(1),r.lc("ngIf",""==e.calculateForm.mapName),r.Cb(2),r.Hc("",r.ic(33,37,"planning.limit"),"..."),r.Cb(2),r.lc("ngIf",e.showImgMsg),r.Cb(3),r.Gc(r.ic(38,39,"planning.size")),r.Cb(2),r.lc("formGroup",e.sizeGroup),r.Cb(2),r.mc("placeholder",r.ic(42,41,"width")),r.lc("ngModel",e.calculateForm.width),r.Cb(2),r.Gc(r.ic(44,43,"meter")),r.Cb(3),r.mc("placeholder",r.ic(47,45,"height")),r.lc("ngModel",e.calculateForm.height),r.Cb(2),r.Gc(r.ic(49,47,"meter")),r.Cb(3),r.mc("placeholder",r.ic(52,49,"result.pdf.altitude")),r.lc("ngModel",e.calculateForm.altitude),r.Cb(2),r.Gc(r.ic(54,51,"meter")),r.Cb(2),r.lc("ngIf",(null==e.sizeGroup.errors?null:e.sizeGroup.errors.sizeRevealed)&&(e.sizeGroup.touched||e.sizeGroup.dirty)),r.Cb(3),r.Gc(r.ic(59,53,"planning.net")),r.Cb(3),r.lc("ngModel",e.calculateForm.objectiveIndex),r.Cb(9),r.Gc(r.ic(71,55,"planning.ok")))},directives:[i.l,i.f,i.b,i.k,i.d,i.r,s.l,i.p,u.b,i.n,u.a],pipes:[g.c],styles:[".modalContent[_ngcontent-%COMP%]{color:#333}td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{margin:.3em .5em;width:4em}td.th[_ngcontent-%COMP%]{background-color:#eee;text-align:right}.modalContent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{width:12em}mat-button-toggle-group[_ngcontent-%COMP%]{margin-left:.5em}.mat-radio-button[_ngcontent-%COMP%]{margin-right:1em}[_nghost-%COMP%]     .mat-button-toggle-appearance-standard .mat-button-toggle-label-content{line-height:32px;padding:0 12px}.h3[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-size:1.3rem}h3[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.7em;margin-left:.5em;font-weight:400;border:0;background-color:#ddd;outline:0;cursor:pointer;border-radius:4px;padding:.3em 1em .4em;line-height:1;vertical-align:bottom}.size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-right:1em}.size[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:3em;margin:0 .3em}.note[_ngcontent-%COMP%]{font-size:.85em;color:#999}"]}),t})()}}]);